# 🏭 크롤러 팩토리 사용법 가이드

## 📌 개요
크롤러 팩토리는 고객 요구사항을 입력받아 **자동으로 윈도우 설치 가능한 크롤러를 생성**하는 시스템입니다.

---

## 🚀 빠른 시작 (3분)

### 1️⃣ 웹 인터페이스 접속
```bash
# 터미널에서 실행
cd crawler_factory
source venv/bin/activate
uvicorn factory_web_interface:app --port 8002 --reload
```

### 2️⃣ 브라우저 접속
```
http://localhost:8002
```

### 3️⃣ 크롤러 생성
1. 요구사항 입력
2. 생성 버튼 클릭
3. 패키지 다운로드

---

## 📝 상세 사용법

### Step 1: 기본 정보 입력

#### 프로젝트명
```
예시: NaverNewsCrawler
설명: 영문, 숫자만 사용 (공백 없음)
```

#### 회사명
```
예시: ABC Company
설명: 고객사 이름 (한글 가능)
```

### Step 2: 대상 사이트 설정

#### 단일 사이트
```
https://news.naver.com
```

#### 다중 사이트
```
https://news.naver.com
https://news.daum.net
https://news.google.com
```
- `+ 사이트 추가` 버튼으로 추가
- `삭제` 버튼으로 제거

### Step 3: 수집 데이터 필드 정의

#### 뉴스 크롤러 예시
```
제목
본문
작성자
날짜
카테고리
조회수
```

#### 쇼핑몰 크롤러 예시
```
상품명
가격
할인율
리뷰수
평점
재고
```

### Step 4: 옵션 설정

#### 출력 형식
- **Excel (.xlsx)** - 가장 추천 ✅
- **CSV (.csv)** - 간단한 데이터
- **JSON (.json)** - 개발자용
- **Database** - 대량 데이터

#### 크롤링 방식
- **정적 (BeautifulSoup)** - 일반 웹사이트
- **동적 (Selenium)** - JavaScript 사이트
- **API 기반** - API 제공 사이트
- **하이브리드** - 혼합 방식

#### 추가 옵션
- ✅ **로그인 필요** - 회원 전용 콘텐츠
- ✅ **스케줄링** - 정기 실행
- ✅ **프록시 지원** - IP 우회
- ✅ **멀티스레딩** - 속도 향상

---

## 🎨 프리셋 템플릿 활용

### 1. 이커머스 상품 크롤러
```yaml
용도: 쇼핑몰 상품 정보 수집
포함 필드: 상품명, 가격, 할인율, 리뷰, 평점
특징: 가격 추적, 재고 확인
```

### 2. 뉴스 기사 크롤러
```yaml
용도: 뉴스 사이트 기사 수집
포함 필드: 제목, 본문, 작성자, 날짜
특징: 키워드 필터링, 중복 제거
```

### 3. 소셜 미디어 크롤러
```yaml
용도: SNS 게시물 수집
포함 필드: 작성자, 내용, 좋아요, 댓글
특징: 트렌드 분석, 감성 분석
```

### 4. 부동산 매물 크롤러
```yaml
용도: 부동산 사이트 매물 정보
포함 필드: 유형, 가격, 면적, 위치
특징: 가격 변동 추적, 알림
```

### 5. 채용공고 크롤러
```yaml
용도: 구인구직 사이트 채용정보
포함 필드: 회사, 직무, 연봉, 경력
특징: 키워드 매칭, 연봉 통계
```

---

## 💼 실전 시나리오

### 시나리오 1: 네이버 쇼핑 모니터링

1. **기본 정보**
   - 프로젝트명: `NaverShoppingMonitor`
   - 회사명: `온라인몰`

2. **대상 사이트**
   ```
   https://shopping.naver.com/best
   ```

3. **데이터 필드**
   ```
   순위
   상품명
   가격
   할인율
   판매자
   리뷰수
   ```

4. **옵션**
   - 출력: Excel
   - 방식: 동적 (Selenium)
   - 스케줄링: ✅
   - 멀티스레딩: ✅

5. **생성 클릭** → 2분 대기 → 다운로드

### 시나리오 2: 경쟁사 가격 추적

1. **프리셋 선택**
   - "이커머스 상품 크롤러" 클릭

2. **사이트 추가**
   ```
   https://www.coupang.com
   https://www.11st.co.kr
   https://www.gmarket.co.kr
   ```

3. **커스텀 필드 추가**
   ```
   경쟁사명
   우리가격
   경쟁가격
   가격차이
   ```

4. **생성 및 다운로드**

---

## 📊 생성 진행 상황

### 진행 단계
```
10% - 프로젝트 구조 생성
30% - 크롤러 엔진 생성
60% - GUI 인터페이스 생성
70% - EXE 빌드 진행
85% - 인스톨러 생성
95% - 패키지 압축
100% - 완료
```

### 예상 소요 시간
- 간단한 크롤러: 1-2분
- 복잡한 크롤러: 3-5분
- 대규모 프로젝트: 5-10분

---

## 📦 생성된 패키지 구조

```
NaverCrawler_package.zip
├── NaverCrawler/
│   ├── crawler_engine.py      # 핵심 크롤링 로직
│   ├── crawler_gui.py          # GUI 인터페이스
│   ├── requirements.txt        # 의존성 목록
│   ├── build.bat              # 빌드 스크립트
│   └── docs/
│       ├── 사용법.md
│       └── CSS선택자_가이드.md
├── dist/
│   └── NaverCrawler.exe       # 실행 파일
└── NaverCrawler_Installer.exe # 설치 프로그램
```

---

## 🔧 고급 기능

### API 엔드포인트

#### 1. 크롤러 생성
```http
POST /api/generate
Content-Type: application/json

{
  "project_name": "CustomCrawler",
  "target_sites": ["https://example.com"],
  "data_fields": ["title", "content"],
  "output_format": "excel"
}
```

#### 2. 상태 확인
```http
GET /api/status/{job_id}
```

#### 3. 다운로드
```http
GET /api/download/{job_id}
```

### 프로그래밍 방식 사용

```python
import requests

# 크롤러 생성 요청
response = requests.post('http://localhost:8002/api/generate', json={
    'project_name': 'MyCrawler',
    'target_sites': ['https://news.naver.com'],
    'data_fields': ['제목', '내용', '날짜'],
    'output_format': 'excel'
})

job_id = response.json()['job_id']

# 상태 확인
status = requests.get(f'http://localhost:8002/api/status/{job_id}')
print(status.json())

# 다운로드
if status.json()['status'] == 'completed':
    download = requests.get(f'http://localhost:8002/api/download/{job_id}')
    with open('crawler_package.zip', 'wb') as f:
        f.write(download.content)
```

---

## 🚨 문제 해결

### 포트 충돌
```bash
# 다른 포트 사용
uvicorn factory_web_interface:app --port 8003
```

### 생성 실패
- 프로젝트명에 특수문자 제거
- 사이트 URL 형식 확인 (https://)
- 필드명 중복 제거

### 다운로드 안됨
- 브라우저 팝업 차단 해제
- 다운로드 폴더 권한 확인

---

## 💡 팁과 트릭

### 1. 빠른 테스트
프리셋 템플릿 → 바로 생성 → 2분 내 완료

### 2. 대량 생성
여러 프로젝트를 순차적으로 생성 가능

### 3. 커스터마이징
생성된 코드를 직접 수정하여 추가 기능 구현

### 4. 배포 준비
생성된 인스톨러를 고객에게 바로 전달 가능

---

## 📞 지원

### 문제 발생 시
1. 콘솔 로그 확인
2. 네트워크 탭 확인
3. job_id로 상태 조회

### 추가 기능 요청
- 새로운 프리셋 추가
- 특별한 크롤링 방식
- 커스텀 출력 형식

---

## 🎯 체크리스트

크롤러 생성 전 확인:
- [ ] 프로젝트명 영문으로 작성
- [ ] 대상 사이트 URL 정확성
- [ ] 필요한 데이터 필드 모두 입력
- [ ] 적절한 크롤링 방식 선택
- [ ] 출력 형식 결정

---

## 🔄 업데이트 내역

### v1.0.0 (2024.01)
- 초기 릴리즈
- 5종 프리셋 템플릿
- 자동 인스톨러 생성
- 웹 인터페이스

---

**크롤러 팩토리로 빠르고 쉽게 맞춤형 크롤러를 생성하세요!** 🚀